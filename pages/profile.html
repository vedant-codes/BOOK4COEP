<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
    <link rel="stylesheet" href="/css/profile.css">
    <script type="module" src="/js/profile.js"></script>
    <title>Profile</title>
</head>

<body>
    <body>
        <div class="container">
          <aside>
              <div class="toggle">
                  <div class="logo">
                      <h2>BOOK4<span class="danger">COEP</span></h2>
                  </div>
                  <div class="close" id="close-btn">
                      <span class="material-icons-sharp"> close </span>
                  </div>
              </div>
    
              <div class="sidebar">
                  <a href="/pages/ui.html">
                      <span class="material-icons-sharp"> dashboard </span>
                      <h3>Discover</h3>
                  </a>
                  <a href="/pages/profile.html" class="active">
                      <span class="material-icons-sharp"> person_outline </span>
                      <h3>Profile</h3>
                  </a>
    
                  <a href="/pages/allbooks.html">
                      <span class="material-icons-sharp"> book </span>
                      <h3>All Books</h3>
                  </a>
                  <a href="/pages/ebooks.html">
                      <span class="material-icons-sharp"> menu_book </span>
                      <h3>E Books</h3>
                  </a>
                  <a href="/pages/faq.html">
                      <span class="material-icons-sharp"> quiz </span>
                      <h3>FAQ</h3>
                  </a>
                  <a href="/root-directory/index.html" onclick="alert('loggingÂ out!')">
                      <span class="material-icons-sharp">
                          logout
                      </span>
                      <h3>Logout</h3>
                  </a>
              </div>
          </aside>
        <!-- End of Sidebar Section -->

        <!-- Main Content -->
        <main>
            <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />


            <!-- Recent Orders Table -->
            <div class="details">
                <div class="detail">
                    <h2>Personal Details</h2>
                    
                </div>
            
            <!-- End of Recent Orders -->  
            <div class="pd" id="pds">
                <a ><span>Name :</span> <i id = "name"></i></a>
                <a ><span>Email ID :</span><i id = "email"> </i></a>
                <a ><span>Status :</span><i id = "status"> </i></a>
                <a><span>Address :</span> <i>Coep College Pune</i></a>
            </div>
            </div>
              
              <div class="main-down">
                <div><h2>Books Issued</h2></div>
                <div class="image-container" id="imageContainer">
                    <div class="scrollable-wrapper">
                        <div class="recent-orders">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Book ID</th>
                                        <th>Book Name</th>
                                        
                                        <th>Issue Date</th>
                                        <th>Return Date</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                            <a href="#">Show All</a>
                        </div>
                      
                    </div>
              </div>
             
            </div>
            

              
        </main>
        <!-- End of Main Content -->

        <!-- Right Section -->
        <div class="right-section">
            <div class="nav">
                <button id="menu-btn">
                    <span class="material-icons-sharp">
                        menu
                    </span>
                </button>
                <div class="dark-mode">
                    <span class="material-icons-sharp active">
                        light_mode
                    </span>
                    <span class="material-icons-sharp">
                        dark_mode
                    </span>
                </div>

                <div class="profile">
                    <div class="info">
                        <p>Hey, <b id = "name3">User</b></p>
                        <small class="text-muted">User</small>
                    </div>
                </div>

            </div>
            <!-- End of Nav -->

            <div class="user-profile">
                <div class="logo">
                    <h2 id="name2">Vedant Shinde</h2>
                    <br>
                    <img src="/assets/profile.avif">
                    <p>COMPUTER ENGINEER</p>
                    <P>FIRST YEAR</P>
                    <br>
                    <p>DIVISION IX</p>
                    <br>
                </div>
            
            </div>
            <div class="reminders">
                <div class="header">
                    <h2>Reminders</h2>
                    <span class="material-icons-sharp">
                        notifications_none
                    </span>
                </div>

                <div class="notification">
                    <div class="icon">
                        <span class="material-symbols-outlined">
                            notifications_active
                            </span>
                    </div>
                    <div class="content">
                        <div class="info">
                            <h3>Return book back till</h3>
                            <small class="text_muted" id = "due1">
                                08:00 AM - 8:00 PM
                            </small>
                        </div>
                        <span class="material-icons-sharp">
                            more_vert
                        </span>
                    </div>
                </div>

                <div class="notification deactive">
                    <div class="icon">
                        <span class="material-symbols-outlined">
                            notifications_active
                            </span>
                    </div>
                    <div class="content">
                        <div class="info">
                            <h3>Return book back till</h3>
                            <small class="text_muted" id = "due2">
                                08:00 AM - 8:00 PM
                            </small>
                        </div>
                        <span class="material-icons-sharp">
                            more_vert
                        </span>
                    </div>
                </div>


            </div>

            

            </div>

        </div>
   
</body>
<script src="/js/admin.js"></script>
<script>
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
import { getDatabase,ref,child,get,update} from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyCcicHvJR8SsPppjverjAVmWUbxz4fWRrU",
  authDomain: "final-venue-booking.firebaseapp.com",
  projectId: "final-venue-booking",
  storageBucket: "final-venue-booking.appspot.com",
  messagingSenderId: "130315557712",
  appId: "1:130315557712:web:10ee9fc8cea3aeb1d7ea55"
};

// Initialize Firebase

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const database = getDatabase();
const user = auth.currentUser;

function convertMillisecondsToDate(milliseconds) {
    // Create a new Date object with milliseconds
    const date = new Date(milliseconds);

    // Get the various components of the date
    const year = date.getFullYear();
    const month = ('0' + (date.getMonth() + 1)).slice(-2); // Adding 1 because getMonth() returns zero-based index
    const day = ('0' + date.getDate()).slice(-2);
    const hours = ('0' + date.getHours()).slice(-2);
    const minutes = ('0' + date.getMinutes()).slice(-2);
    const seconds = ('0' + date.getSeconds()).slice(-2);

    // Format the date as YYYY-MM-DD HH:MM:SS
    const formattedDate = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;

    return formattedDate;
}

auth.onAuthStateChanged((user) => {
    if (user) {
        const userId = user.uid;
        const database = getDatabase();
        const userRef = ref(database, 'users/' + userId);

        get(userRef).then((snapshot) => {
            const userData = snapshot.val();
            const username = userData.username;
            const useremail = userData.email;
            const userstatus = userData.status;
            const book1 = userData.book1;
            const book2 = userData.book2;

            document.getElementById('name3').innerHTML = username;





            return userId;
        }).catch((error) => {
            console.error("Error retrieving user data:", error);
        });
    } else {
        console.log("No user signed in.");
    }
});





</script>
</html>
